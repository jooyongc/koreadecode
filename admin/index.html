<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Korea Decode CMS (AI Powered)</title>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-487F519VEM"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-487F519VEM');
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <style>
        :root {
            --bg-body: #0f172a; /* Slate 900 */
            --bg-panel: #1e293b; /* Slate 800 */
            --bg-input: #334155; /* Slate 700 */
            --text-main: #f8fafc; /* Slate 50 */
            --text-muted: #94a3b8; /* Slate 400 */
            --accent: #6366f1; /* Indigo 500 */
            --accent-hover: #4f46e5; /* Indigo 600 */
            --border: #334155;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }
        * { box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-body); color: var(--text-main); margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Layout */
        .sidebar { width: 260px; background-color: var(--bg-panel); border-right: 1px solid var(--border); display: flex; flex-direction: column; padding: 24px; }
        .main-content { flex: 1; padding: 32px; overflow-y: auto; position: relative; }
        
        /* Components */
        .brand { font-size: 22px; font-weight: 800; margin-bottom: 40px; color: var(--text-main); letter-spacing: -0.5px; display: flex; align-items: center; gap: 8px; }
        .nav-item { display: flex; align-items: center; gap: 12px; padding: 12px 16px; color: var(--text-muted); text-decoration: none; border-radius: 8px; margin-bottom: 4px; transition: 0.2s; cursor: pointer; font-weight: 500; }
        .nav-item:hover, .nav-item.active { background-color: var(--bg-input); color: var(--text-main); }
        .nav-item i { font-size: 20px; }
        
        .card { background: var(--bg-panel); border: 1px solid var(--border); border-radius: 12px; padding: 24px; margin-bottom: 24px; }
        
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; margin-bottom: 8px; font-size: 14px; font-weight: 500; color: var(--text-muted); }
        .form-input, .form-select, .form-textarea { width: 100%; padding: 12px 16px; background-color: var(--bg-input); border: 1px solid var(--border); border-radius: 8px; color: var(--text-main); font-size: 15px; outline: none; transition: 0.2s; font-family: inherit; }
        .form-input:focus { border-color: var(--accent); box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2); }
        
        .btn { padding: 12px 24px; border-radius: 8px; border: none; cursor: pointer; font-weight: 600; font-size: 14px; display: inline-flex; align-items: center; justify-content: center; gap: 8px; transition: 0.2s; }
        .btn-primary { background-color: var(--accent); color: white; }
        .btn-primary:hover { background-color: var(--accent-hover); }
        .btn-outline { background: transparent; border: 1px solid var(--border); color: var(--text-muted); }
        .btn-outline:hover { border-color: var(--text-muted); color: var(--text-main); background: var(--bg-input); }
        .btn-ai { background: linear-gradient(135deg, #8b5cf6, #d946ef); color: white; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3); }
        .btn-ai:hover { box-shadow: 0 6px 16px rgba(139, 92, 246, 0.5); transform: translateY(-1px); }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }

        /* AI Process Steps */
        .ai-step { border-left: 2px solid var(--border); padding-left: 20px; margin-bottom: 30px; position: relative; }
        .ai-step.active { border-left-color: var(--accent); }
        .ai-step-badge { position: absolute; left: -11px; top: 0; width: 20px; height: 20px; background: var(--bg-panel); border: 2px solid var(--border); border-radius: 50%; color: var(--text-muted); font-size: 10px; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .ai-step.active .ai-step-badge { border-color: var(--accent); background: var(--accent); color: white; }
        .ai-step-title { font-size: 16px; font-weight: 600; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }

        /* Generated Options */
        .suggestion-chip { display: inline-block; padding: 6px 12px; background: var(--bg-input); border-radius: 20px; font-size: 13px; margin: 0 5px 5px 0; cursor: pointer; border: 1px solid transparent; }
        .suggestion-chip:hover { background: var(--border); }
        .suggestion-chip.selected { background: rgba(99, 102, 241, 0.2); border-color: var(--accent); color: var(--accent); }

        /* Editor Overrides */
        .ql-toolbar { background-color: var(--bg-input); border: 1px solid var(--border) !important; border-radius: 8px 8px 0 0; }
        .ql-container { background-color: rgba(0,0,0,0.2); color: var(--text-main); border: 1px solid var(--border) !important; border-top: none; border-radius: 0 0 8px 8px; font-size: 16px; height: 500px; }
        .ql-stroke { stroke: var(--text-muted) !important; }
        .ql-fill { fill: var(--text-muted) !important; }
        .ql-picker { color: var(--text-muted) !important; }

        /* Modals & Utils */
        .login-wrap { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-body); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center; backdrop-filter: blur(4px); }
        .modal-box { background: var(--bg-panel); width: 800px; max-height: 90vh; border-radius: 16px; padding: 24px; display: flex; flex-direction: column; overflow: hidden; border: 1px solid var(--border); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        .modal-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; overflow-y: auto; padding: 4px; }
        .modal-img-item { height: 140px; border-radius: 8px; cursor: pointer; object-fit: cover; width: 100%; transition: 0.2s; border: 2px solid transparent; }
        .modal-img-item:hover { border-color: var(--accent); transform: scale(1.02); }

        .spinner { animation: spin 1s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        
        .view-section { display: none; }
        .view-section.active { display: block; animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Mobile Preview */
        .mobile-preview-container { width: 375px; height: 667px; border: 10px solid #111; border-radius: 30px; background: #fff; margin: 0 auto; overflow: hidden; position: relative; display: flex; flex-direction: column; }
        .mobile-status-bar { height: 20px; background: #111; width: 100%; }
        .mobile-body { flex: 1; overflow-y: auto; padding: 20px; color: #333; font-size: 14px; line-height: 1.6; }
        .mobile-body img { max-width: 100%; height: auto; border-radius: 8px; margin: 10px 0; }
        .mobile-body h1 { font-size: 20px; margin-bottom: 10px; line-height: 1.3; }

        /* Automation Table */
        .auto-table { width: 100%; border-collapse: collapse; }
        .auto-table th { text-align: left; padding: 12px; color: var(--text-muted); border-bottom: 1px solid var(--border); font-size: 12px; text-transform: uppercase; }
        .auto-table td { padding: 16px 12px; border-bottom: 1px solid var(--border); color: var(--text-main); font-size: 14px; }

        /* Migration Log */
        .log-box { background: #000; color: #0f0; padding: 10px; height: 200px; overflow-y: auto; font-family: monospace; font-size: 12px; border-radius: 6px; border: 1px solid var(--border); margin-top: 10px; }

        /* Image Preview Box */
        .img-preview-box { width: 100%; height: 200px; background-color: var(--bg-input); border: 2px dashed var(--border); border-radius: 8px; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative; cursor: pointer; transition: 0.2s; margin-bottom: 10px; }
        .img-preview-box:hover { border-color: var(--accent); }
        .img-preview-box img { width: 100%; height: 100%; object-fit: cover; }
        .img-placeholder { text-align: center; color: var(--text-muted); font-size: 13px; }

        /* Dashboard Bars */
        .stat-bar { height: 8px; background: var(--bg-input); border-radius: 4px; overflow: hidden; margin-top: 6px; }
        .stat-bar-fill { height: 100%; background: var(--accent); border-radius: 4px; }
        .stat-row { display: flex; justify-content: space-between; font-size: 13px; margin-top: 12px; color: var(--text-muted); }

        /* Persona Card */
        .persona-card { border: 1px solid var(--border); padding: 16px; border-radius: 8px; margin-bottom: 10px; display: flex; align-items: center; justify-content: space-between; background: var(--bg-input); }
        .persona-avatar { width: 40px; height: 40px; background: var(--accent); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: white; margin-right: 12px; }
        .persona-details { flex: 1; }
        .persona-name { font-weight: 600; color: var(--text-main); }
        .persona-role { font-size: 12px; color: var(--text-muted); }

    </style>
</head>
<body>

    <!-- LOGIN -->
    <div id="login-section" class="login-wrap">
        <div class="card" style="width: 400px; border: 1px solid var(--border);">
            <div style="text-align: center; margin-bottom: 24px;">
                <div class="brand" style="justify-content: center;"><i class="ph ph-command"></i> K-Decode Admin</div>
                <p style="color: var(--text-muted);">Sign in to manage content</p>
            </div>
            <div class="form-group">
                <input type="email" id="login-email" class="form-input" placeholder="Email address">
            </div>
            <div class="form-group">
                <input type="password" id="login-password" class="form-input" placeholder="Password">
            </div>
            <button class="btn btn-primary" style="width: 100%;" id="btn-login">Sign In</button>
            <p id="login-error" style="color: var(--warning); text-align: center; margin-top: 16px; font-size: 13px;"></p>
        </div>
    </div>

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="brand"><i class="ph ph-command" style="color: var(--accent);"></i> K-Decode</div>
        <nav>
            <div class="nav-item active" data-view="dashboard"><i class="ph ph-squares-four"></i> Dashboard</div>
            <div class="nav-item" data-view="ai-writer"><i class="ph ph-magic-wand"></i> AI Writer</div>
            <div class="nav-item" data-view="automation"><i class="ph ph-robot"></i> Automation</div>
            <div class="nav-item" data-view="posts"><i class="ph ph-article"></i> All Posts</div>
            <div class="nav-item" data-view="migration" style="color: #f59e0b;"><i class="ph ph-database"></i> Migration</div>
            <div class="nav-item" data-view="settings"><i class="ph ph-gear"></i> Settings</div>
        </nav>
        <div style="margin-top: auto; padding-top: 20px; border-top: 1px solid var(--border);">
            <div class="nav-item" id="btn-logout" style="color: #ef4444;"><i class="ph ph-sign-out"></i> Sign Out</div>
        </div>
    </aside>

    <!-- MAIN -->
    <main class="main-content">

        <!-- DASHBOARD -->
        <div id="view-dashboard" class="view-section active">
            <h1 style="margin-bottom: 24px;">Analytics Overview</h1>
            
            <!-- Key Stats -->
            <div class="row" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; margin-bottom: 24px;">
                <div class="card">
                    <div style="color: var(--text-muted); font-size: 14px;">Total Posts</div>
                    <div style="font-size: 36px; font-weight: 700; margin-top: 8px;" id="stat-posts">0</div>
                </div>
                <div class="card">
                    <div style="color: var(--text-muted); font-size: 14px;">Total Views (Real-time)</div>
                    <div style="font-size: 36px; font-weight: 700; margin-top: 8px; color: var(--success);" id="stat-views">0</div>
                </div>
                <div class="card">
                    <div style="color: var(--text-muted); font-size: 14px;">Scheduled</div>
                    <div style="font-size: 36px; font-weight: 700; margin-top: 8px; color: var(--warning);" id="stat-scheduled">0</div>
                </div>
            </div>

            <!-- Detailed Stats -->
            <div class="row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                
                <!-- Traffic Source -->
                <div class="card">
                    <h3 style="margin-bottom: 20px;">Traffic Sources</h3>
                    <div>
                        <div class="stat-row"><span>Google Search (Organic)</span> <span>45%</span></div>
                        <div class="stat-bar"><div class="stat-bar-fill" style="width: 45%;"></div></div>
                        
                        <div class="stat-row"><span>Social Media (Insta/TikTok)</span> <span>30%</span></div>
                        <div class="stat-bar"><div class="stat-bar-fill" style="width: 30%; background-color: #E1306C;"></div></div>

                        <div class="stat-row"><span>Direct / Bookmark</span> <span>15%</span></div>
                        <div class="stat-bar"><div class="stat-bar-fill" style="width: 15%; background-color: #f59e0b;"></div></div>

                        <div class="stat-row"><span>Referral</span> <span>10%</span></div>
                        <div class="stat-bar"><div class="stat-bar-fill" style="width: 10%; background-color: var(--text-muted);"></div></div>
                    </div>
                </div>

                <!-- Top Posts -->
                <div class="card">
                    <h3 style="margin-bottom: 20px;">Top Performing Posts</h3>
                    <table class="auto-table" id="dashboard-top-posts">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th style="text-align: right;">Views</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td colspan="2">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </div>

        <!-- AI WRITER -->
        <div id="view-ai-writer" class="view-section">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                <h1 id="writer-heading">AI Content Creator</h1>
                <div style="display: flex; gap: 10px;">
                    <button id="btn-reset-ai" class="btn btn-outline"><i class="ph ph-plus"></i> New Post</button>
                    <button id="btn-seo-polish" class="btn btn-ai"><i class="ph ph-sparkle"></i> AI SEO Polish</button>
                </div>
            </div>

            <div class="row" style="display: flex; gap: 40px;">
                <!-- Left: AI Controls -->
                <div style="flex: 1; max-width: 400px;">
                    
                    <!-- Step 1: Topic -->
                    <div class="ai-step active" id="step-1">
                        <div class="ai-step-badge">1</div>
                        <div class="ai-step-title">Writer &amp; Topic</div>
                        
                        <!-- Persona Selector -->
                        <div class="form-group">
                            <label class="form-label" style="color: var(--accent);">Who is writing?</label>
                            <select id="ai-persona-select" class="form-select" style="border-color: var(--accent);">
                                <option value="default">Default AI (Generic)</option>
                                <!-- Loaded dynamically -->
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Category</label>
                            <select id="ai-category" class="form-select">
                                <option value="K-pop">K-Pop News</option>
                                <option value="Beauty">K-Beauty &amp; Skincare</option>
                                <option value="Travel">Travel &amp; Guides</option>
                                <option value="Food">Korean Food</option>
                                <option value="News">General News</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Topic Idea (Korean or English)</label>
                            <textarea id="ai-topic" class="form-textarea" rows="3" placeholder="Example: Best Street Food in Myeongdong"></textarea>
                        </div>
                        <button id="btn-run-ai-phase1" class="btn btn-ai" style="width: 100%;">
                            <i class="ph ph-brain"></i> Generate Plan
                        </button>
                    </div>

                    <!-- Step 2: Plan -->
                    <div class="ai-step" id="step-2" style="opacity: 0.5; pointer-events: none;">
                        <div class="ai-step-badge">2</div>
                        <div class="ai-step-title">SEO Strategy</div>
                        <div class="form-group">
                            <label class="form-label">Suggested Title (English)</label>
                            <input type="text" id="ai-suggested-title" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Keywords</label>
                            <div id="ai-keywords-container"></div>
                        </div>
                        <button id="btn-run-ai-phase2" class="btn btn-primary" style="width: 100%;">
                            <i class="ph ph-pen-nib"></i> Write Full Article
                        </button>
                    </div>

                    <!-- Step 3: Visuals -->
                    <div class="ai-step" id="step-3" style="opacity: 0.5; pointer-events: none;">
                        <div class="ai-step-badge">3</div>
                        <div class="ai-step-title">Featured Image</div>
                        <div class="img-preview-box" id="ai-img-preview-box">
                            <img id="selected-ai-img" style="display: none;">
                            <div class="img-placeholder" id="ai-img-placeholder">
                                Auto-selected by AI<br>
                                Click to change
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Search Replacement</label>
                            <div style="display: flex; gap: 8px;">
                                <input type="text" id="ai-img-query" class="form-input">
                                <button id="btn-search-unsplash" class="btn btn-outline">Search</button>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- Right: Editor & Output -->
                <div style="flex: 2; display: flex; flex-direction: column;">
                    <div class="card" style="flex: 1; display: flex; flex-direction: column; padding: 0; overflow: hidden;">
                        <div style="padding: 16px; border-bottom: 1px solid var(--border); background: var(--bg-input); display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-weight: 600;">Editor</span>
                            <div style="display: flex; gap: 8px;">
                                <button id="btn-show-preview" class="btn btn-outline" style="padding: 6px 12px; font-size: 12px;">
                                    <i class="ph ph-device-mobile"></i> Preview
                                </button>
                                <button class="btn btn-primary" id="btn-save-post" style="padding: 6px 12px; font-size: 12px;">
                                    <i class="ph ph-paper-plane-right"></i> Publish
                                </button>
                            </div>
                        </div>
                        
                        <!-- Quill Editor -->
                        <div id="editor-container"></div>
                    </div>

                    <!-- Scheduling -->
                    <div class="card" style="padding: 16px;">
                        <div style="display: flex; align-items: center; gap: 16px;">
                            <div style="flex: 1;">
                                <label class="form-label">Schedule Publish (Optional)</label>
                                <input type="datetime-local" id="post-schedule" class="form-input">
                            </div>
                            <div style="flex: 1;">
                                <label class="form-label">SEO Score</label>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="flex: 1; height: 8px; background: var(--bg-input); border-radius: 4px; overflow: hidden;">
                                        <div id="seo-bar" style="width: 0%; height: 100%; background: var(--warning); transition: 0.5s;"></div>
                                    </div>
                                    <span id="seo-score-text" style="font-size: 14px; font-weight: bold;">0%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AUTOMATION -->
        <div id="view-automation" class="view-section">
            <h1 style="margin-bottom: 24px;">Bulk Automation</h1>
            <div class="row" style="gap: 40px;">
                <div style="flex: 1; max-width: 400px;">
                    <div class="card">
                        <h3>Schedule Settings</h3>
                        <div class="form-group">
                            <label class="form-label">Category</label>
                            <select id="auto-category" class="form-select">
                                <option value="News">News</option>
                                <option value="K-pop">K-Pop</option>
                                <option value="Food">Food</option>
                                <option value="Travel">Travel</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Start Date</label>
                            <input type="datetime-local" id="auto-start-date" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Interval</label>
                            <select id="auto-interval" class="form-select">
                                <option value="24">Every 24 Hours (Daily)</option>
                                <option value="12">Every 12 Hours</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Topics</label>
                            <textarea id="auto-topics" class="form-textarea" rows="10"></textarea>
                        </div>
                        <button id="btn-run-automation" class="btn btn-ai" style="width: 100%;">
                            <i class="ph ph-robot"></i> Schedule All
                        </button>
                    </div>
                </div>
                <div style="flex: 2;">
                    <div class="card">
                        <h3>Queue</h3>
                        <table class="auto-table">
                            <thead><tr><th>Status</th><th>Title</th><th>Scheduled</th><th>Action</th></tr></thead>
                            <tbody id="auto-queue-list"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- MIGRATION -->
        <div id="view-migration" class="view-section">
            <h1>Legacy Post Migration</h1>
            <div class="card">
                <div style="margin-bottom: 20px;">
                    <button id="btn-start-migration" class="btn btn-primary">Start Migration</button>
                    <span id="migration-status" style="margin-left: 10px; font-weight: bold;"></span>
                </div>
                <label class="form-label">Migration Log</label>
                <div id="migration-log" class="log-box"></div>
            </div>
        </div>

        <!-- POSTS LIST -->
        <div id="view-posts" class="view-section">
            <h1 style="margin-bottom: 24px;">Content Library</h1>
            <div id="posts-grid" style="display: grid; gap: 16px;"></div>
        </div>

        <!-- SETTINGS -->
        <div id="view-settings" class="view-section">
            <h1 style="margin-bottom: 24px;">Settings</h1>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                <!-- General Settings -->
                <div class="card">
                    <h3>General</h3>
                    <div class="form-group">
                        <label class="form-label">Gemini API Key (Required for AI)</label>
                        <input type="password" id="setting-gemini-key" class="form-input" placeholder="AIza...">
                    </div>
                    <div class="form-group">
                        <label class="form-label">OpenAI API Key (Optional Fallback)</label>
                        <input type="password" id="setting-openai-key" class="form-input" placeholder="sk-...">
                    </div>
                    <div class="form-group">
                        <label class="form-label">OpenRouter Key (Recommended for Free AI)</label>
                        <input type="password" id="setting-openrouter-key" class="form-input" placeholder="sk-or-...">
                        <small style="color:var(--text-muted); display:block; margin-top:4px;">Get a free key at <a href="https://openrouter.ai/" target="_blank" style="color:var(--accent);">openrouter.ai</a></small>
                    </div>
                    <button id="btn-save-settings" class="btn btn-primary">Save</button>
                    <hr style="border-top: 1px solid var(--border); margin: 20px 0;">
                    <h3 style="margin-bottom: 10px; color: var(--warning);">Maintenance</h3>
                    <button id="btn-remove-duplicates" class="btn btn-outline" style="border-color: var(--warning); color: var(--warning);">Remove Duplicate Posts</button>
                </div>

                <!-- Persona Settings -->
                <div class="card">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                        <h3>AI Writer Personas</h3>
                        <button class="btn btn-ai" style="padding: 6px 12px; font-size:12px;" id="btn-generate-persona">
                            <i class="ph ph-magic-wand"></i> AI Generate
                        </button>
                    </div>
                    <p style="color: var(--text-muted); font-size: 13px; margin-bottom: 16px;">Create specialized personas. Their Bio will appear at the bottom of their posts.</p>
                    
                    <div id="persona-list"></div>

                    <div style="background: var(--bg-body); padding: 16px; border-radius: 8px; margin-top: 20px; border: 1px solid var(--border);">
                        <h4 style="margin-top: 0; margin-bottom: 16px;" id="persona-form-title">Create New Persona</h4>
                        <div class="form-group"><label class="form-label">Name</label><input id="p-name" class="form-input" placeholder="e.g. Jenny Kim"></div>
                        <div style="display: flex; gap: 10px;">
                            <div class="form-group" style="flex: 1;">
                                <label class="form-label">Age</label>
                                <select id="p-age" class="form-select">
                                    <option value="20s">20s</option>
                                    <option value="30s">30s</option>
                                    <option value="40s">40s</option>
                                    <option value="50s+">50s+</option>
                                </select>
                            </div>
                            <div class="form-group" style="flex: 1;">
                                <label class="form-label">Gender</label>
                                <select id="p-gender" class="form-select">
                                    <option value="Female">Female</option>
                                    <option value="Male">Male</option>
                                    <option value="Non-binary">Non-binary</option>
                                </select>
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <div class="form-group" style="flex: 1;">
                                <label class="form-label">Nationality</label>
                                <select id="p-nationality" class="form-select">
                                    <option value="USA">USA</option>
                                    <option value="UK">UK</option>
                                    <option value="Canada">Canada</option>
                                    <option value="Australia">Australia</option>
                                    <option value="France">France</option>
                                    <option value="Germany">Germany</option>
                                    <option value="Singapore">Singapore</option>
                                    <option value="Japan">Japan</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="form-group" style="flex: 1;">
                                <label class="form-label">Job / Role</label>
                                <select id="p-job" class="form-select">
                                    <option value="Travel Blogger">Travel Blogger</option>
                                    <option value="K-Beauty Editor">K-Beauty Editor</option>
                                    <option value="Food Critic">Food Critic</option>
                                    <option value="K-Pop Stan">K-Pop Stan</option>
                                    <option value="Digital Nomad">Digital Nomad</option>
                                    <option value="Student">Student</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group"><label class="form-label">Likes / Expertise</label><input id="p-likes" class="form-input" placeholder="e.g. Spicy food, skincare, hiking"></div>
                        
                        <div class="form-group">
                            <label class="form-label">Writer Bio (Auto-generated)</label>
                            <textarea id="p-bio" class="form-textarea" rows="3" placeholder="Click 'AI Generate' or write your own..."></textarea>
                        </div>

                        <button id="btn-save-persona" class="btn btn-primary" style="width: 100%;">Add Persona</button>
                        <button id="btn-cancel-persona" class="btn btn-outline" style="width: 100%; margin-top: 8px; display: none;">Cancel Edit</button>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- MODALS -->
    <div id="modal-unsplash" class="modal-overlay">
        <div class="modal-box">
            <div style="display: flex; justify-content: space-between; margin-bottom: 16px;">
                <h3 style="margin: 0;">Unsplash Images</h3>
                <button id="btn-close-unsplash" class="btn btn-outline" style="padding: 4px 10px;"><i class="ph ph-x"></i></button>
            </div>
            <div id="unsplash-results" class="modal-grid"></div>
        </div>
    </div>

    <div id="modal-preview" class="modal-overlay">
        <div class="mobile-preview-container">
            <div class="mobile-status-bar"></div>
            <div class="mobile-body">
                <div style="position: sticky; top: 0; background: #fff; padding-bottom: 10px; border-bottom: 1px solid #eee; margin-bottom: 15px;">
                    <span style="font-size: 12px; color: #666; text-transform: uppercase; font-weight: 700;" id="prev-cat">CATEGORY</span>
                </div>
                <h1 id="prev-title">Post Title</h1>
                <div style="font-size: 12px; color: #999; margin-bottom: 20px;">By Korea Decode</div>
                <img id="prev-img" src="" style="display: none;">
                <div id="prev-content"></div>
            </div>
            <div style="padding: 15px; background: #f9f9f9; text-align: center;">
                <button id="btn-close-preview" class="btn btn-primary" style="width: 100%;">Close</button>
            </div>
        </div>
    </div>

    <!-- All scripts are now loaded as modules from within admin.js -->
    <script type="module" src="/admin/admin.js?v=13"></script>
</body>
</html>